package utils_test

import (
	"cs/utils"

	"fmt"
	. "github.com/onsi/ginkgo"
	. "github.com/onsi/gomega"
)

var data = []struct {
	aid      string
	upid     uint64
	expected int64
}{

	{"6f9697ead7eb456b869017e3443f5afd", 57404, 2316843495661597679},
	{"09802c853fff47a58d46d93815187cb7", 78366, 2988525584064512420},
	{"6f9697ead7eb456b869017e3443f5afd", 57400, -4295489207007495942},
	{"6f9697ead7eb456b869017e3443f5afd", 57380, 3866852244697435954},
	{"09802c853fff47a58d46d93815187cb7", 81958, 4140679432145764049},
	{"6f9697ead7eb456b869017e3443f5afd", 57416, -8757037321989273657},
	{"6f9697ead7eb456b869017e3443f5afd", 57386, -1074765493585736360},
	{"a961e6ed6e144920a64b768df36d3fd5", 24912, -3435441787400975216},
	{"a961e6ed6e144920a64b768df36d3fd5", 24913, 2304014076224046626},
	{"8f7b9b17a49d4defb4d0980372618a5e", 1841, 7022391594612656342},
	{"8f7b9b17a49d4defb4d0980372618a5e", 1493, 786270099068415346},
	{"8f7b9b17a49d4defb4d0980372618a5e", 1833, 8303507406168333464},
	{"8f7b9b17a49d4defb4d0980372618a5e", 1583, 7886196236553014927},
	{"8f7b9b17a49d4defb4d0980372618a5e", 1855, -3064868753000890558},
	{"a961e6ed6e144920a64b768df36d3fd5", 24936, -5015486326849303296},
	{"b7b5ac316b8843c7aff604dbada5160d", 4145, -7480525554301871188},
	{"b7b5ac316b8843c7aff604dbada5160d", 4143, 3029066825140273899},
	{"6f9697ead7eb456b869017e3443f5afd", 53776, -7254203585454443979},
	{"a961e6ed6e144920a64b768df36d3fd5", 24758, 2330187254352208107},
	{"6f9697ead7eb456b869017e3443f5afd", 53933, -8294285581804865932},
	{"6f9697ead7eb456b869017e3443f5afd", 57418, -7332153686119855565},
	{"8f7b9b17a49d4defb4d0980372618a5e", 1858, 4409890897459377725},
	{"8f7b9b17a49d4defb4d0980372618a5e", 1374, 2546203737921514571},
	{"b7b5ac316b8843c7aff604dbada5160d", 4144, -515332799154257020},
	{"09802c853fff47a58d46d93815187cb7", 78222, 865113893073182368},
	{"09802c853fff47a58d46d93815187cb7", 78230, -261274818126448788},
	{"6f9697ead7eb456b869017e3443f5afd", 53789, -2368819607006381132},
	{"a961e6ed6e144920a64b768df36d3fd5", 24909, -6560681744096122016},
	{"6f9697ead7eb456b869017e3443f5afd", 57424, -3301295725383492808},
}

var _ = Describe("Murmer", func() {

	Context("When I use existing aid and upid combos", func() {
		It("the go code should generate the same murmer hash", func() {
			for _, elem := range data {
				mHash64 := utils.Hash64(fmt.Sprintf("%s%d", elem.aid, elem.upid))
				Expect(mHash64).To(Equal(elem.expected))
			}

		})
	})

})
